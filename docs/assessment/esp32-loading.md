# ESP32 資源負載評估

根據目前的原始碼編譯結果，以下是 ESP32 模組的資源使用情況。

## 記憶體使用情況

| 資源 | 使用量 | 百分比 |
| :--- | :--- | :--- |
| **程式儲存空間 (Flash)** | 1186122 / 3145728 位元組 | **37%** |
| **動態記憶體 (RAM)** | 63540 / 327680 位元組 | **19%** |

## 分析

*   **程式儲存空間 (Flash):** 目前使用率為 37%。這為未來的功能新增或函式庫更新留下了充足的空間。
*   **動態記憶體 (RAM):** 目前使用率為 19%。這是一個健康的狀態，有足夠的記憶體可用於區域變數和執行時操作。

## CPU 使用率評估

CPU 使用率是一個執行時期的指標，無法單純從原始碼分析或編譯結果中直接評估出來。然而，我們可以從時間複雜度（Time Complexity）和空間複雜度（Space Complexity）的角度來理解程式碼對 CPU 資源的潛在需求。

### 時間複雜度 (Time Complexity)

時間複雜度描述了演算法執行時間與輸入資料量之間的關係。對於 ESP32 應用，影響時間複雜度的主要因素包括：

*   **感測器資料處理：** 熱像儀 (AMG8833) 和視覺模組 (ESP32-S3) 會產生大量的資料。如果資料處理演算法（例如影像處理、特徵提取）的時間複雜度較高（例如 O(N^2) 或更高），則會顯著增加 CPU 負擔，尤其是在資料量 N 增大時。
*   **通訊協定處理：** Wi-Fi 通訊（例如資料封包的編碼、解碼、傳輸和接收）會消耗 CPU 週期。頻繁或大量的資料傳輸會導致較高的時間複雜度。
*   **控制迴圈與任務排程：** 車輛控制迴圈的執行頻率和內部計算的複雜度。如果控制演算法涉及複雜的數學運算或迭代，其時間複雜度會直接影響 CPU 佔用。
*   **中斷服務常式 (ISR)：** ISR 必須盡可能簡短和高效，以避免阻塞主程式執行。如果 ISR 執行時間過長，會導致 CPU 資源被長時間佔用。

目前程式碼中，若有大量像素點的影像處理、複雜的濾波演算法或頻繁的網路封包處理，都可能導致較高的時間複雜度，進而影響 CPU 使用率。

### 空間複雜度 (Space Complexity)

空間複雜度描述了演算法執行所需的記憶體空間與輸入資料量之間的關係。雖然這主要影響 RAM 使用，但過高的空間複雜度可能間接影響 CPU 效能，例如：

*   **記憶體分配與釋放：** 頻繁的動態記憶體分配 (malloc) 和釋放 (free) 會增加 CPU 開銷，尤其是在記憶體碎片化嚴重時。
*   **快取效率：** 如果資料結構導致記憶體存取模式不連續，可能降低 CPU 快取命中率，從而增加記憶體存取時間，間接影響 CPU 效率。

目前程式碼的 RAM 使用率為 19%，顯示空間複雜度在可控範圍內。然而，如果未來引入大型緩衝區、複雜的資料結構或需要儲存大量歷史數據，則需注意其對空間複雜度的影響。

### 總結

目前的負載在裝置的限制範圍內。然而，為了確保系統的穩定性和響應速度，建議在實際運行環境中進行 CPU 效能監控。對於時間複雜度較高的任務（如影像處理），應考慮優化演算法、降低處理頻率或利用 ESP32 的雙核心架構進行並行處理，以降低 CPU 負擔。